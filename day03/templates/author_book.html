<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>author_book信息查询</title>
    <meta name="description" content="">
    <meta name="keywords" content="">
    <link href="" rel="stylesheet">
</head>

<body>
    <form action="" method="post">
        {{ form.csrf_token }}
        {{form.author_name.label}}
        <p>{{form.author_name}}</p>
        {% for msg in form.author_name.errors %}
        <p>{{msg}}</p>
        {% endfor %}
        <!-- 书名 -->
        {{form.book_name.label}}
        <p>{{form.book_name}}</p>
        {% for msg in form.book_name.errors %}
        <p>{{msg}}</p>
        {% endfor %}
        <!-- 邮箱 -->
        {{form.email.label}}
        <p>{{form.email}}</p>
        {% for msg in form.email.errors %}
        <p>{{msg}}</p>
        {% endfor %}
        <!-- 主角 -->
        {{form.lead.label}}
        <p>{{form.lead}}</p>
        {% for msg in form.lead.errors %}
        <p>{{msg}}</p>
        {% endfor %}

        {{ form.submit}}
    </form>
    <ul>
        {% for author in authors %}
        <li>作者：{{ author.name }}</li>
        <ul>
            {% for book in author.books %}
            <li>书籍：{{ book.name }}</li>
            <!-- <a href="javascript:;" book-id="{{ book.id }}">删除</a> -->
            <a href="/delete_book?book_id={{book.id}}">GET删除</a>
            {% endfor %}
        </ul>
        {% endfor %}
    </ul>
    <script type="text/javascript" src="/static/js/jquery.min.js"></script>
    <script>
        // $("a").click(
        //     function (){
        //         var data={
        //             book_id:$(this).attr("book-id")
        //         };
        //         //将js中的对象转换为json字符串
        //         var req_json=JSON.stringify(data);
        //         // $.post("/delete_book",req_json,function(resp){
        //         //     if (resp.code==0){
        //         //         location.href="/";
        //         //     }
        //         // },"json")//简写形式  不能指明回传数据的格式
        //         $.ajax({
        //             url:"/delete_book",//后端请求的url
        //             type:"post",//请求方式
        //             data:req_json,//向后端发送的请求体数据
        //             contentType:"application/json",//指明向后端发送的数据
        //             dataType:"json",//后端回传的数据格式  
        //             success:function (resp) {//回调函数
        //             if (resp.code==0){
        //                 location.href="/";
        //             }
        //         }//完整的写法
        //     })
        //     }
        // )
    </script>
</body>

</html>